<!DOCTYPE html><html lang="ar"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>QR Code Scanner</title><style>body {font-family: Arial, sans-serif;text-align: center;margin: 20px;direction: rtl !important;}video {width: 100%;max-width: 400px;border: 2px solid #000;border-radius: 10px;}#result-container {margin-top: 20px;padding: 15px;border: 1px solid #ccc;border-radius: 8px;display: none; }#full-result {font-size: 16px;font-weight: bold;margin-bottom: 15px;word-wrap: break-word;direction: ltr;}.btn {display: inline-block;padding: 10px 20px;font-size: 16px;cursor: pointer;text-align: center;text-decoration: none;border-radius: 5px;margin: 5px;border: none;}#copy-btn {background-color: #007bff;color: white;}#back-btn {background-color: #6c757d;color: white;}</style></head><body><h3 style="margin-bottom: 10px;">Ù‚Ù… Ø¨ØªØµÙˆÙŠØ± Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„ÙƒØ±Øª Ø¨Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</h3><div style="display: none;"><select id="cameraSelect"></select></div><video id="scanner" style="height: 380px; object-fit: cover;"></video><div id="result-container"><h4 id="status-message"></h4><div id="result-details" style="display: none;"><p style="margin: 5px 0; font-weight: bold;">Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„:</p><div id="full-result"></div></div><button id="copy-btn" class="btn" style="display: none;">Ù†Ø³Ø® Ø§Ù„Ø£Ø±Ù‚Ø§Ù…</button><button id="rescan-btn" class="btn">ØµÙˆØ± Ù…Ù† Ø¬Ø¯ÙŠØ¯</button><a id="back-btn" class="btn" href="http://10.10.10.0">Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„ØµÙØ­Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„</a></div><script type="module">import QrScanner from "./js/qr-scanner.min.js";var sourcePage = new URLSearchParams(window.location.search).get("tthh");if (sourcePage) {} else {sourcePage = "http://10.10.10.0"; }const video = document.getElementById('scanner');const resultContainer = document.getElementById('result-container');const fullResultElem = document.getElementById('full-result');const copyBtn = document.getElementById('copy-btn');const rescanBtn = document.getElementById('rescan-btn');const cameraSelect = document.getElementById("cameraSelect");const qrScanner = new QrScanner(video,result => {console.log('decoded qr code:', result);qrScanner.stop();video.style.display = 'none';video.style.display = 'none';document.querySelector('h3').style.display = 'none';resultContainer.style.display = 'block';const statusMessage = document.getElementById('status-message');const resultDetails = document.getElementById('result-details');const hasNumbers = /\d/.test(result.data);if (hasNumbers) {statusMessage.textContent = 'Ù„Ù‚Ø¯ Ø±Ø¨Ø­Øª ÙƒØ±Øª Ù†Øª Ù…Ø¬Ø§Ù†ÙŠ Ù…Ù† Ø´Ø¨ÙƒØ© Ø§Ù„Ù…ÙˆØ¯Ø© Ù†Øª ğŸ‰';fullResultElem.textContent = result.data;resultDetails.style.display = 'block';copyBtn.style.display = 'inline-block';} else {statusMessage.textContent = 'Ù„Ù… ØªØ±Ø¨Ø­ Ø­Ø¸ Ø§ÙˆÙØ± ÙÙŠ Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©ğŸ™';resultDetails.style.display = 'none';copyBtn.style.display = 'none';}},{highlightScanRegion: true,highlightCodeOutline: true,});copyBtn.addEventListener('click', () => {const text = fullResultElem.textContent;const numbers = text.match(/\d+/g)?.join('') || '';if (numbers) {navigator.clipboard.writeText(numbers).then(() => {copyBtn.textContent = 'ØªÙ… Ø§Ù„Ù†Ø³Ø®!';setTimeout(() => { copyBtn.textContent = 'Ù†Ø³Ø® Ø§Ù„Ø£Ø±Ù‚Ø§Ù…'; }, 2000);}).catch(err => {console.error('Failed to copy numbers: ', err);alert('ÙØ´Ù„ Ù†Ø³Ø® Ø§Ù„Ø£Ø±Ù‚Ø§Ù…');});} else {alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø±Ù‚Ø§Ù… Ù„Ù†Ø³Ø®Ù‡Ø§');}});function resetScannerUI() {video.style.display = 'block';document.querySelector('h3').style.display = 'block';resultContainer.style.display = 'none';document.getElementById('result-details').style.display = 'none';copyBtn.style.display = 'none';}rescanBtn.addEventListener('click', () => {resetScannerUI();startScanner();});async function startScanner() {try {const allCameras = await QrScanner.listCameras(true);const backCameras = allCameras.filter(c => c.label.toLowerCase().includes('back'));if (backCameras.length === 0) {if (allCameras.length > 0) {await qrScanner.setCamera(allCameras[0].id);} else {alert('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ ÙƒØ§Ù…ÙŠØ±Ø§.');return;}} else {await qrScanner.setCamera(backCameras[0].id);}await qrScanner.start();console.log('Ø§Ù„Ù…Ø§Ø³Ø­ Ø§Ù„Ø¶ÙˆØ¦ÙŠ Ø¨Ø¯Ø£ Ø¨Ù†Ø¬Ø§Ø­.');} catch (error) {console.error('ÙØ´Ù„ Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø§Ø³Ø­:', error);alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ù†Ø­ Ø§Ù„Ø¥Ø°Ù† ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©.');}}resetScannerUI();startScanner();</script></body></html>